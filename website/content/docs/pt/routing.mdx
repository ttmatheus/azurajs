---
title: Routing
description: Aprenda sobre padr√µes de rota, par√¢metros e correspond√™ncia
icon: Route
---

# Routing üõ£Ô∏è

AzuraJS fornece um sistema de roteamento poderoso e flex√≠vel. Voc√™ pode usar decorators com TypeScript ou a API funcional com JavaScript.

## B√°sico de Rotas üìç

### TypeScript

Rotas s√£o definidas usando decorators de m√©todo HTTP em m√©todos de controller:

```typescript
import { Controller, Get, Param } from "azurajs/decorators";

@Controller("/api/users")
export class UserController {
  @Get()  // Corresponde: GET /api/users
  getAllUsers() {}

  @Get("/:id")  // Corresponde: GET /api/users/123
  getUser(@Param("id") id: string) {}
}
```

### JavaScript

Rotas s√£o definidas usando m√©todos funcionais:

```javascript
const { AzuraClient } = require("azurajs");

const app = new AzuraClient();

app.get("/api/users", ({ req, res }) => {
  // GET /api/users
  res.json({ users: [] });
});

app.get("/api/users/:id", ({ req, res }) => {
  // GET /api/users/123
  const { id } = req.params;
  res.json({ id });
});
```

## Caminhos de Rota üó∫Ô∏è

### Caminhos Est√°ticos

#### TypeScript

```typescript
@Get("/users")  // Correspond√™ncia exata apenas
getUsers() {}

@Get("/users/active")  // Correspond√™ncia exata
getActiveUsers() {}
```

#### JavaScript

```javascript
app.get("/users", ({ req, res }) => {
  res.json({ users: [] });
});

app.get("/users/active", ({ req, res }) => {
  res.json({ activeUsers: [] });
});
```

### Par√¢metros Din√¢micos

Use `:paramName` para par√¢metros de rota:

#### TypeScript

```typescript
@Get("/:id")  // Corresponde /123, /abc, etc.
getOne(@Param("id") id: string) {}

@Get("/:userId/posts/:postId")  // M√∫ltiplos par√¢metros
getPost(
  @Param("userId") userId: string,
  @Param("postId") postId: string
) {}
```

#### JavaScript

```javascript
app.get("/:id", ({ req, res }) => {
  const { id } = req.params;  // Corresponde /123, /abc, etc.
  res.json({ id });
});

app.get("/:userId/posts/:postId", ({ req, res }) => {
  const { userId, postId } = req.params;
  res.json({ userId, postId });
});
```

### Par√¢metros de Query

Par√¢metros de query n√£o fazem parte do caminho da rota:

#### TypeScript

```typescript
import { Get, Query } from "azurajs/decorators";

// Rota: GET /search
// URL: GET /search?q=john&limit=10
@Get("/search")
search(@Query("q") query: string, @Query("limit") limit: string) {
  return { query, limit };
}
```

#### JavaScript

```javascript
// Rota: GET /search
// URL: GET /search?q=john&limit=10
app.get("/search", ({ req, res }) => {
  const { q, limit } = req.query;
  res.json({ query: q, limit });
});
```

## Padr√µes de Rota üé®

### Combinando Est√°tico e Din√¢mico

```typescript
import { Controller, Get, Param } from "azurajs/decorators";

@Controller("/api")
export class ApiController {
  @Get("/users/:id/profile") // GET /api/users/123/profile
  getProfile(@Param("id") id: string) {}

  @Get("/posts/:id/comments/:commentId") // M√∫ltiplos params
  getComment(@Param("id") postId: string, @Param("commentId") commentId: string) {}
}
```

### Rotas Aninhadas

```typescript
@Controller("/api/organizations")
export class OrgController {
  @Get("/:orgId/teams/:teamId/members")
  getMembers(@Param("orgId") orgId: string, @Param("teamId") teamId: string) {
    return { orgId, teamId };
  }
}
```

## Prioridade de Rotas ‚ö°

Rotas s√£o correspondidas na ordem em que s√£o registradas. Rotas mais espec√≠ficas devem ser definidas primeiro:

```typescript
@Controller("/api/users")
export class UserController {
  // ‚úÖ Ordem correta
  @Get("/me") // Rota espec√≠fica primeiro
  getCurrentUser() {}

  @Get("/:id") // Rota gen√©rica depois
  getUser(@Param("id") id: string) {}

  // ‚ùå Ordem errada
  @Get("/:id") // Isso corresponderia /me
  getUser2(@Param("id") id: string) {}

  @Get("/me") // Nunca alcan√ßado!
  getCurrentUser2() {}
}
```

## M√©todos HTTP üîß

Todos os m√©todos HTTP padr√£o s√£o suportados:

### TypeScript

```typescript
@Controller("/api/posts")
export class PostController {
  @Get()  // Ler todos
  getAll() {}

  @Get("/:id")  // Ler um
  getOne(@Param("id") id: string) {}

  @Post()  // Criar
  create(@Body() data: any) {}

  @Put("/:id")  // Atualizar (completo)
  update(@Param("id") id: string, @Body() data: any) {}

  @Patch("/:id")  // Atualizar (parcial)
  patch(@Param("id") id: string, @Body() data: any) {}

  @Delete("/:id")  // Deletar
  remove(@Param("id") id: string) {}

  @Head("/:id")  // Verificar exist√™ncia
  exists(@Param("id") id: string, @Res() res: ResponseServer) {
    res.status(200).end();
  }

  @Options()  // Preflight CORS
  options(@Res() res: ResponseServer) {
    res.set("Allow", "GET, POST").end();
  }
}
```

### JavaScript

```javascript
// Ler todos
app.get("/api/posts", ({ req, res }) => {
  res.json({ posts: [] });
});

// Ler um
app.get("/api/posts/:id", ({ req, res }) => {
  const { id } = req.params;
  res.json({ id });
});

// Criar
app.post("/api/posts", ({ req, res }) => {
  const data = req.body;
  res.status(201).json({ data });
});

// Atualizar (completo)
app.put("/api/posts/:id", ({ req, res }) => {
  const { id } = req.params;
  const data = req.body;
  res.json({ id, data });
});

// Atualizar (parcial)
app.patch("/api/posts/:id", ({ req, res }) => {
  const { id } = req.params;
  const data = req.body;
  res.json({ id, data });
});

// Deletar
app.delete("/api/posts/:id", ({ req, res }) => {
  const { id } = req.params;
  res.status(204).send();
});

// Verificar exist√™ncia
app.head("/api/posts/:id", ({ req, res }) => {
  res.status(200).end();
});

// Preflight CORS
app.options("/api/posts", ({ req, res }) => {
  res.set("Allow", "GET, POST").end();
});
```

## Rotas Program√°ticas üî®

Voc√™ tamb√©m pode definir rotas programaticamente sem decorators:

```typescript
const app = new AzuraClient();

app.get("/api/health", ({ req, res }) => {
  res.json({ status: "ok" });
});

app.post("/api/webhook", ({ req, res }) => {
  console.log("Webhook recebido:", req.body);
  res.status(200).send("OK");
});

app.put("/api/items/:id", ({ req, res }) => {
  res.json({ id: req.params.id });
});
```

## Helpers de Rota üõ†Ô∏è

### M√∫ltiplas Rotas por M√©todo

```typescript
// N√£o suportado diretamente, mas voc√™ pode criar um wrapper
@Controller("/api/posts")
export class PostController {
  private getPostsLogic() {
    return { posts: [] };
  }

  @Get()
  getPosts() {
    return this.getPostsLogic();
  }

  @Get("/all")
  getAllPosts() {
    return this.getPostsLogic();
  }
}
```

### Grupos de Rotas

Use controllers para agrupar rotas relacionadas:

```typescript
// Rotas de autentica√ß√£o
@Controller("/auth")
export class AuthController {
  @Post("/login")
  login() {}

  @Post("/register")
  register() {}

  @Post("/logout")
  logout() {}
}

// Rotas de API p√∫blica
@Controller("/api/public")
export class PublicController {}

// Rotas de admin
@Controller("/api/admin")
export class AdminController {}
```

## Router com Prefix üéØ

O AzuraJS permite criar routers modulares e mont√°-los com prefixos espec√≠ficos, facilitando a organiza√ß√£o de rotas em aplica√ß√µes maiores.

### Exemplo B√°sico

```javascript
const { AzuraClient, Router } = require("azurajs");

// Criar routers modulares
const aboutRouter = new Router();
aboutRouter.add("GET", "/", ({ req, res }) => {
  res.end("About Home");
});
aboutRouter.add("GET", "/team", ({ req, res }) => {
  res.end("Our Team");
});

const apiRouter = new Router();
apiRouter.add("GET", "/", ({ req, res }) => {
  res.json({ message: "API Home" });
});
apiRouter.add("GET", "/users", ({ req, res }) => {
  res.json({ users: [] });
});

// Montar routers com prefixos
const app = new AzuraClient();
app.use("/about", aboutRouter);
app.use("/api", apiRouter);

app.listen(3000);
```

### Rotas Dispon√≠veis

- `GET /about` ‚Üí "About Home"
- `GET /about/team` ‚Üí "Our Team"
- `GET /api` ‚Üí JSON com mensagem
- `GET /api/users` ‚Üí JSON com lista de usu√°rios

### Benef√≠cios

- **Modularidade**: Organize rotas relacionadas em m√≥dulos separados
- **Reutiliza√ß√£o**: Use o mesmo router em diferentes aplica√ß√µes
- **Manutenibilidade**: Facilita encontrar e modificar rotas espec√≠ficas
- **Escalabilidade**: Adicione novos m√≥dulos sem modificar o c√≥digo existente

### Exemplo Completo

Veja o exemplo completo em [examples/servers/router/prefix.js](https://github.com/azurajsjs/azurajs/tree/main/examples/servers/router/prefix.js)

## Roteamento RESTful üéØ

Siga conven√ß√µes REST para APIs baseadas em recursos:

```typescript
@Controller("/api/users")
export class UserController {
  @Get() // GET /api/users - Listar todos os usu√°rios
  index() {}

  @Post() // POST /api/users - Criar usu√°rio
  store(@Body() data: any) {}

  @Get("/:id") // GET /api/users/:id - Obter um usu√°rio
  show(@Param("id") id: string) {}

  @Put("/:id") // PUT /api/users/:id - Atualizar usu√°rio
  update(@Param("id") id: string, @Body() data: any) {}

  @Delete("/:id") // DELETE /api/users/:id - Deletar usu√°rio
  destroy(@Param("id") id: string) {}
}
```

## Testando Rotas üß™

Teste suas rotas:

```typescript
import { AzuraClient } from "azurajs";
import { applyDecorators } from "azurajs/decorators";
import { UserController } from "./controllers/UserController";

const app = new AzuraClient();
applyDecorators(app, [UserController]);

// Iniciar servidor
await app.listen(3000);

// Testar endpoints
const response = await fetch("http://localhost:3000/api/users/123");
const data = await response.json();
console.log(data);
```

## Melhores Pr√°ticas ‚ú®

<Callout type="tip">
  **Use nomes consistentes**: Siga conven√ß√µes REST (index, show, store, update, destroy)
</Callout>

<Callout type="tip">
  **Mantenha rotas planas**: Evite rotas profundamente aninhadas (m√°ximo 2-3 n√≠veis)
</Callout>

<Callout type="tip">
  **Use substantivos no plural**: `/users` em vez de `/user`, `/posts` em vez de `/post`
</Callout>

<Callout type="warn">**Observe a ordem das rotas**: Rotas espec√≠ficas antes das gen√©ricas</Callout>

## Pr√≥ximos Passos üìñ

<Cards>
  <Card title="Decorators" href="decorators" description="Domine todos os decorators" />
  <Card title="Middleware" href="middleware" description="Adicione middleware √†s rotas" />
  <Card title="Valida√ß√£o" href="validation" description="Valide par√¢metros de rota" />
</Cards>
