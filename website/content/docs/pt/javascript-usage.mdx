---
title: Uso com JavaScript
description: Usando AzuraJS com JavaScript puro
icon: Code
---

# Uso com JavaScript ğŸ“

AzuraJS funciona perfeitamente com JavaScript puro! Embora o framework seja TypeScript-first, vocÃª pode usar todos os recursos com JavaScript usando a API funcional.

## Por que JavaScript? ğŸ¤”

- **Simplicidade** - NÃ£o precisa de transpilaÃ§Ã£o para projetos simples
- **Familiar** - API similar ao Express que desenvolvedores JavaScript conhecem
- **FlexÃ­vel** - Use decorators em TypeScript, funÃ§Ãµes em JavaScript
- **Progressivo** - Comece com JS, migre para TS quando necessÃ¡rio

## InÃ­cio RÃ¡pido ğŸš€

### 1. Instalar AzuraJS

```bash
npm install azurajs
```

### 2. Criar ConfiguraÃ§Ã£o

```javascript title="azura.config.js"
const config = {
  environment: "development",
  server: {
    port: 3000,
    cluster: false,
  },
  logging: {
    enabled: true,
    showDetails: true,
  },
};

export default config;
```

Ou com **CommonJS**:

```javascript title="azura.config.js"
const config = {
  environment: "development",
  server: {
    port: 3000,
  },
};

module.exports = config;
```

### 3. Criar Seu Servidor

```javascript title="index.js"
const { AzuraClient } = require("azurajs");
const { createLoggingMiddleware } = require("azurajs/middleware");

const app = new AzuraClient();
const logger = createLoggingMiddleware(app.getConfig());
app.use(logger);

app.get("/", ({ req, res }) => {
  res.json({ message: "OlÃ¡ do JavaScript!" });
});

app.listen();
```

### 4. Executar

```bash
bun run index.js
# ou
node index.js
```

## API Funcional ğŸ”§

### Definindo Rotas

```javascript
const { AzuraClient } = require("azurajs");

const app = new AzuraClient();

// Rota GET
app.get("/users", ({ req, res }) => {
  res.json({ users: [] });
});

// Rota POST
app.post("/users", ({ req, res }) => {
  const body = req.body;
  res.status(201).json({ created: body });
});

// Rota PUT
app.put("/users/:id", ({ req, res }) => {
  const { id } = req.params;
  res.json({ id, updated: true });
});

// Rota DELETE
app.delete("/users/:id", ({ req, res }) => {
  const { id } = req.params;
  res.status(204).send();
});
```

### ParÃ¢metros de RequisiÃ§Ã£o

```javascript
// ParÃ¢metros de rota
app.get("/users/:id/posts/:postId", ({ req, res }) => {
  const { id, postId } = req.params;
  res.json({ userId: id, postId });
});

// ParÃ¢metros de query
app.get("/search", ({ req, res }) => {
  const { q, limit = 10, page = 1 } = req.query;
  res.json({ query: q, limit: Number(limit), page: Number(page) });
});

// Corpo da requisiÃ§Ã£o
app.post("/data", ({ req, res }) => {
  const body = req.body;
  res.json({ received: body });
});

// Headers
app.get("/info", ({ req, res }) => {
  const userAgent = req.headers["user-agent"];
  res.json({ userAgent });
});
```

## Middleware em JavaScript ğŸ”Œ

### Middleware BÃ¡sico

```javascript
// Log simples
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url}`);
  next();
});

// Tempo de requisiÃ§Ã£o
app.use((req, res, next) => {
  const start = Date.now();
  next();
  const duration = Date.now() - start;
  console.log(`RequisiÃ§Ã£o levou ${duration}ms`);
});
```

### Middleware de AutenticaÃ§Ã£o

```javascript
const authMiddleware = (req, res, next) => {
  const token = req.headers.authorization;
  
  if (!token) {
    return res.status(401).json({ error: "Sem token" });
  }
  
  // Verificar token
  req.user = { id: 1, name: "UsuÃ¡rio" };
  next();
};

// Aplicar em rotas especÃ­ficas
app.get("/protected", authMiddleware, ({ req, res }) => {
  res.json({ user: req.user });
});
```

### Middleware ConfigurÃ¡vel

```javascript
function createRateLimit(limit, windowMs) {
  const requests = new Map();
  
  return (req, res, next) => {
    const ip = req.socket.remoteAddress;
    const now = Date.now();
    
    const userRequests = requests.get(ip) || [];
    const recentRequests = userRequests.filter(time => now - time < windowMs);
    
    if (recentRequests.length >= limit) {
      return res.status(429).json({ error: "Muitas requisiÃ§Ãµes" });
    }
    
    recentRequests.push(now);
    requests.set(ip, recentRequests);
    next();
  };
}

// Usar
const rateLimit = createRateLimit(100, 60000); // 100 requisiÃ§Ãµes por minuto
app.use(rateLimit);
```

## Exemplo Completo ğŸ¯

API REST completa em JavaScript:

```javascript title="server.js"
import { AzuraClient } from "azurajs";
import { createLoggingMiddleware } from "azurajs/middleware";

const app = new AzuraClient();
const logger = createLoggingMiddleware(app.getConfig());
app.use(logger);

// Banco de dados em memÃ³ria
const users = [
  { id: 1, name: "Alice", email: "alice@example.com" },
  { id: 2, name: "Bob", email: "bob@example.com" },
];

let nextId = 3;

// Listar todos os usuÃ¡rios
app.get("/api/users", ({ req, res }) => {
  const { page = 1, limit = 10 } = req.query;
  const startIndex = (page - 1) * limit;
  const endIndex = startIndex + Number(limit);
  
  res.json({
    data: users.slice(startIndex, endIndex),
    pagination: {
      page: Number(page),
      limit: Number(limit),
      total: users.length,
    },
  });
});

// Buscar usuÃ¡rio por ID
app.get("/api/users/:id", ({ req, res }) => {
  const { id } = req.params;
  const user = users.find(u => u.id === Number(id));
  
  if (!user) {
    return res.status(404).json({ error: "UsuÃ¡rio nÃ£o encontrado" });
  }
  
  res.json({ data: user });
});

// Criar usuÃ¡rio
app.post("/api/users", ({ req, res }) => {
  const { name, email } = req.body;
  
  if (!name || !email) {
    return res.status(400).json({ error: "Nome e email obrigatÃ³rios" });
  }
  
  const user = {
    id: nextId++,
    name,
    email,
    createdAt: new Date().toISOString(),
  };
  
  users.push(user);
  res.status(201).json({ data: user });
});

// Atualizar usuÃ¡rio
app.put("/api/users/:id", ({ req, res }) => {
  const { id } = req.params;
  const { name, email } = req.body;
  
  const user = users.find(u => u.id === Number(id));
  
  if (!user) {
    return res.status(404).json({ error: "UsuÃ¡rio nÃ£o encontrado" });
  }
  
  if (name) user.name = name;
  if (email) user.email = email;
  user.updatedAt = new Date().toISOString();
  
  res.json({ data: user });
});

// Deletar usuÃ¡rio
app.delete("/api/users/:id", ({ req, res }) => {
  const { id } = req.params;
  const index = users.findIndex(u => u.id === Number(id));
  
  if (index === -1) {
    return res.status(404).json({ error: "UsuÃ¡rio nÃ£o encontrado" });
  }
  
  users.splice(index, 1);
  res.status(204).send();
});

// Health check
app.get("/health", ({ req, res }) => {
  res.json({ status: "saudÃ¡vel", timestamp: new Date().toISOString() });
});

// Iniciar servidor
await app.listen();
```

## ManipulaÃ§Ã£o de Cookies ğŸª

```javascript
// Definir cookie
app.get("/login", ({ req, res }) => {
  res.cookie("session", "abc123", {
    httpOnly: true,
    maxAge: 3600000, // 1 hora
    secure: true,
  });
  res.json({ message: "Logado" });
});

// Ler cookie
app.get("/profile", ({ req, res }) => {
  const session = req.cookies.session;
  if (!session) {
    return res.status(401).json({ error: "NÃ£o autenticado" });
  }
  res.json({ session });
});

// Limpar cookie
app.get("/logout", ({ req, res }) => {
  res.clearCookie("session");
  res.json({ message: "Deslogado" });
});
```

## Tratamento de Erros âš ï¸

```javascript
// Middleware personalizado de tratamento de erros
app.use((req, res, next) => {
  try {
    next();
  } catch (error) {
    console.error(error);
    res.status(500).json({ error: "Erro interno do servidor" });
  }
});

// Tratamento de erro em nÃ­vel de rota
app.get("/risky", ({ req, res }) => {
  try {
    // OperaÃ§Ã£o arriscada
    throw new Error("Algo deu errado");
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});
```

## MigraÃ§Ã£o para TypeScript ğŸ”„

Quando estiver pronto para adicionar seguranÃ§a de tipos:

1. **Renomear arquivos** - `.js` â†’ `.ts`
2. **Adicionar tipos** - Importe tipos do `azurajs`
3. **Decorators opcionais** - Use decorators para melhor organizaÃ§Ã£o

```typescript
import { AzuraClient } from "azurajs";
import type { RequestHandler } from "azurajs/types";

const authMiddleware: RequestHandler = async (req, res, next) => {
  // Sua lÃ³gica de middleware
  await next();
};
```

## Melhores PrÃ¡ticas âœ¨

<Callout type="tip">
  **Use const** - Prefira `const` ao invÃ©s de `let` quando possÃ­vel
</Callout>

<Callout type="tip">
  **Desestruture** - Use desestruturaÃ§Ã£o para cÃ³digo mais limpo: `const { id } = req.params`
</Callout>

<Callout type="tip">
  **Async/await** - Use async/await ao invÃ©s de callbacks
</Callout>

<Callout type="tip">
  **Tratamento de erros** - Sempre trate erros adequadamente
</Callout>

## Dicas de Performance âš¡

```javascript
// Evite criar middleware em rotas
// âŒ Ruim
app.get("/data", (req, res, next) => {
  const logger = createLogger(); // Criado em cada requisiÃ§Ã£o!
  next();
}, handler);

// âœ… Bom
const logger = createLogger(); // Criado uma vez
app.use(logger);
app.get("/data", handler);
```

## PrÃ³ximos Passos ğŸ“š

<Cards>
  <Card title="InÃ­cio RÃ¡pido" href="quick-start" description="Construa sua primeira API" />
  <Card title="Middleware" href="middleware" description="Aprenda sobre middleware" />
  <Card title="Roteamento" href="routing" description="PadrÃµes avanÃ§ados de rotas" />
  <Card title="TypeScript" href="typescript-support" description="Migrar para TypeScript" />
</Cards>

## Recursos ğŸ”—

- [Exemplos JavaScript](https://github.com/0xviny/azurajs/tree/main/examples/servers)
- [ReferÃªncia da API](https://azura.js.org/docs/pt)
- [Comunidade Discord](https://discord.gg/gr63YzEYfp)
