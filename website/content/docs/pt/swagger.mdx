---
title: Swagger / OpenAPI
description: Documenta√ß√£o completa de API com interface moderna e interativa
---

# Swagger / OpenAPI 3.0

AzuraJS inclui suporte completo para documenta√ß√£o de API usando Swagger/OpenAPI 3.0, com uma interface moderna dark mode e funcionalidade "Try It Out" integrada.

> **Nota:** O sistema Swagger do AzuraJS gera automaticamente documenta√ß√£o OpenAPI 3.0 a partir dos seus controllers e decorators, sem configura√ß√£o manual.

## Instala√ß√£o

O Swagger j√° vem inclu√≠do no AzuraJS. Basta importar do subm√≥dulo `azurajs/swagger`:

```typescript
import { setupSwaggerWithControllers } from "azurajs/swagger";
```

## Setup R√°pido

A forma mais simples de adicionar Swagger √† sua aplica√ß√£o √© com uma linha:

```typescript
import { AzuraClient } from "azurajs";
import { setupSwaggerWithControllers } from "azurajs/swagger";
import { UserController } from "./controllers/UserController";

const app = new AzuraClient();

// Uma linha para configurar tudo!
setupSwaggerWithControllers(app, {
  title: "My API",
  description: "API documentation",
  version: "1.0.0"
}, [UserController]);

app.listen();
```

> **Acesse a documenta√ß√£o em:**
> - **UI Interativa:** `http://localhost:3000/docs`
> - **OpenAPI JSON:** `http://localhost:3000/api-spec.json`

## Decorators de Documenta√ß√£o

### @Swagger() - Nova API Simplificada ‚≠ê

O decorator `@Swagger` unifica **toda** a documenta√ß√£o em um √∫nico lugar, tornando muito mais f√°cil e intuitivo documentar suas APIs:

```typescript
import { Controller, Get, Post } from "azurajs/decorators";
import { Swagger } from "azurajs/swagger";

@Controller("/users")
class UserController {
  @Get("/:id")
  @Swagger({
    summary: "Busca usu√°rio por ID",
    description: "Retorna informa√ß√µes detalhadas de um usu√°rio espec√≠fico",
    tags: ["Users"],
    parameters: [
      {
        name: "id",
        in: "path",
        description: "ID do usu√°rio",
        required: true,
        schema: { type: "string" },
        example: "123"
      }
    ],
    responses: {
      200: {
        description: "Usu√°rio encontrado",
        example: { 
          id: "123", 
          name: "John Doe",
          email: "john@example.com"
        }
      },
      404: {
        description: "Usu√°rio n√£o encontrado",
        example: { error: "User not found" }
      }
    }
  })
  async getUser(@Req() req, @Res() res) {
    res.json({ id: req.params.id, name: "John Doe" });
  }

  @Post("/")
  @Swagger({
    summary: "Cria novo usu√°rio",
    tags: ["Users"],
    requestBody: {
      description: "Dados do usu√°rio",
      required: true,
      content: {
        "application/json": {
          schema: {
            type: "object",
            properties: {
              name: { type: "string" },
              email: { type: "string", format: "email" }
            },
            required: ["name", "email"]
          },
          example: {
            name: "Jane Doe",
            email: "jane@example.com"
          }
        }
      }
    },
    responses: {
      201: {
        description: "Usu√°rio criado com sucesso",
        example: { 
          id: 456, 
          name: "Jane Doe",
          email: "jane@example.com"
        }
      },
      400: {
        description: "Dados inv√°lidos",
        example: { error: "Invalid data" }
      }
    }
  })
  async createUser(@Req() req, @Res() res) {
    res.status(201).json(req.body);
  }
}
```

**Vantagens do @Swagger:**
- ‚úÖ **Tudo em um lugar** - N√£o precisa usar m√∫ltiplos decorators
- ‚úÖ **Mais leg√≠vel** - Configura√ß√£o agrupada e organizada
- ‚úÖ **Menos c√≥digo** - Uma √∫nica declara√ß√£o ao inv√©s de 4-5 decorators
- ‚úÖ **TypeScript** - Autocompletar e valida√ß√£o de tipos
- ‚úÖ **Exemplos integrados** - Defina exemplos direto nas responses

---

### Decorators Individuais (API Tradicional)

Se preferir maior granularidade, voc√™ ainda pode usar os decorators individuais:

#### @ApiDoc()

Documenta informa√ß√µes b√°sicas do endpoint:

```typescript
import { Controller, Get } from "azurajs/decorators";
import { ApiDoc } from "azurajs/swagger";

@Controller("/users")
class UserController {
  @Get("/:id")
  @ApiDoc({
    summary: "Get user by ID",
    description: "Retrieve detailed information about a specific user"
  })
  async getUser(@Req() req, @Res() res) {
    res.json({ id: req.params.id, name: "John Doe" });
  }
}
```

### @ApiResponse()

Define as respostas poss√≠veis do endpoint:

```typescript
@Get("/:id")
@ApiResponse(200, "User found", {
  example: { 
    id: 1, 
    name: "John Doe", 
    email: "john@example.com" 
  }
})
@ApiResponse(404, "User not found", {
  example: { error: "User not found" }
})
async getUser(@Req() req, @Res() res) {
  // ...
}
```

### @ApiParameter()

Documenta par√¢metros da requisi√ß√£o:

```typescript
@Get("/:id")
@ApiParameter("id", "path", {
  description: "User ID",
  required: true,
  schema: { type: "integer" },
  example: 123
})
async getUser(@Req() req, @Res() res) {
  // ...
}
```

**Tipos de par√¢metros:**
- `path` - Par√¢metros na URL (`/users/:id`)
- `query` - Query strings (`/users?page=1`)
- `header` - Headers HTTP
- `cookie` - Cookies

### @ApiBody()

Documenta o corpo da requisi√ß√£o:

```typescript
@Post("/")
@ApiBody({
  description: "User data",
  required: true,
  example: {
    name: "Jane Doe",
    email: "jane@example.com",
    age: 25
  }
})
async createUser(@Req() req, @Res() res) {
  res.status(201).json(req.body);
}
```

### @ApiTags()

Organiza endpoints por tags:

```typescript
@Controller("/users")
@ApiTags("Users")
class UserController {
  // Todos os endpoints ter√£o a tag "Users"
}

// Ou em endpoints espec√≠ficos:
@Get("/")
@ApiTags("Users", "Public")
async listUsers() {
  // ...
}
```

### @ApiSecurity()

Especifica requisitos de autentica√ß√£o:

```typescript
@Get("/profile")
@ApiSecurity("bearerAuth")
async getProfile(@Req() req, @Res() res) {
  // Endpoint protegido
}
```

**Configurando security schemes:**

```typescript
setupSwaggerWithControllers(app, {
  title: "My API",
  version: "1.0.0",
  securitySchemes: {
    bearerAuth: {
      type: "http",
      scheme: "bearer",
      bearerFormat: "JWT"
    },
    apiKey: {
      type: "apiKey",
      in: "header",
      name: "X-API-Key"
    }
  }
}, [UserController]);
```

### @ApiDeprecated()

Marca endpoints como deprecados:

```typescript
@Get("/old-endpoint")
@ApiDeprecated()
@ApiDoc({ summary: "Old endpoint (use /new-endpoint instead)" })
async oldEndpoint(@Req() req, @Res() res) {
  // ...
}
```

## JavaScript Simples (Sem Decorators)

Se voc√™ prefere JavaScript puro ou n√£o quer usar decorators, use o m√©todo `addDoc()`:

```javascript
import { AzuraClient } from "azurajs";
import { setupSwagger, SwaggerGenerator } from "azurajs/swagger";

const app = new AzuraClient();

// Criar gerador Swagger
const swagger = new SwaggerGenerator({
  title: "API Simples",
  description: "API documentada de forma simples",
  version: "1.0.0",
  tags: [
    { name: "Users", description: "Gerenciamento de usu√°rios" },
    { name: "Binary", description: "Opera√ß√µes de codifica√ß√£o" }
  ]
});

// Rota GET com query parameter
app.get("/binary/encode", (req, res) => {
  const text = req.query.q;
  if (!text) {
    return res.status(400).json({ error: "Query 'q' is required" });
  }

  const binary = text.split("").map(c => 
    c.charCodeAt(0).toString(2).padStart(8, "0")
  ).join("");

  res.json({
    input: text,
    output: binary
  });
});

// Documentar com addDoc() - F√ÅCIL! ‚≠ê
swagger.addDoc({
  method: "GET",
  path: "/binary/encode",
  summary: "Codifica texto em bin√°rio",
  description: "Converte qualquer texto para representa√ß√£o bin√°ria",
  tags: ["Binary"],
  parameters: [
    {
      name: "q",
      in: "query",
      description: "Texto a ser codificado",
      required: true,
      schema: { type: "string" },
      example: "Hello"
    }
  ],
  responses: {
    200: {
      description: "Texto codificado com sucesso",
      example: {
        input: "Hello",
        output: "0100100001100101011011000110110001101111"
      }
    },
    400: {
      description: "Par√¢metro ausente",
      example: { error: "Query 'q' is required" }
    }
  }
});

// Rota POST com body
app.post("/users", (req, res) => {
  const newUser = { id: Date.now(), ...req.body };
  res.status(201).json(newUser);
});

swagger.addDoc({
  method: "POST",
  path: "/users",
  summary: "Cria novo usu√°rio",
  tags: ["Users"],
  requestBody: {
    description: "Dados do usu√°rio",
    required: true,
    example: {
      name: "Jo√£o Silva",
      email: "joao@example.com"
    }
  },
  responses: {
    201: {
      description: "Usu√°rio criado",
      example: {
        id: 1234567890,
        name: "Jo√£o Silva",
        email: "joao@example.com"
      }
    }
  }
});

// Rota GET com path parameter
app.get("/users/:id", (req, res) => {
  res.json({
    id: req.params.id,
    name: "John Doe",
    email: "john@example.com"
  });
});

swagger.addDoc({
  method: "GET",
  path: "/users/:id",
  summary: "Busca usu√°rio por ID",
  tags: ["Users"],
  parameters: [
    {
      name: "id",
      in: "path",
      description: "ID do usu√°rio",
      required: true,
      schema: { type: "string" },
      example: "123"
    }
  ],
  responses: {
    200: {
      description: "Usu√°rio encontrado",
      example: {
        id: "123",
        name: "John Doe",
        email: "john@example.com"
      }
    },
    404: {
      description: "Usu√°rio n√£o encontrado"
    }
  }
});

// Setup Swagger UI
setupSwagger(app, swagger);

app.listen(3000).then(() => {
  console.log("üöÄ Server: http://localhost:3000");
  console.log("üìö Docs: http://localhost:3000/docs");
});
```

**Vantagens do `addDoc()`:**
- ‚úÖ **JavaScript puro** - Funciona sem TypeScript ou decorators
- ‚úÖ **Simples** - Menos verboso que SwaggerHelpers.createResponse
- ‚úÖ **Autom√°tico** - Gera responses OpenAPI a partir de exemplos
- ‚úÖ **Flex√≠vel** - Misture com rotas tradicionais do AzuraJS

---

## Exemplo Completo (TypeScript com Decorators)

```typescript
import { Controller, Get, Post, Put, Delete, Req, Res } from "azurajs/decorators";
import { Swagger } from "azurajs/swagger";

@Controller("/users")
class UserController {
  @Get("/")
  @Swagger({
    summary: "Lista todos os usu√°rios",
    tags: ["Users"],
    parameters: [
      {
        name: "page",
        in: "query",
        schema: { type: "number" },
        example: 1
      },
      {
        name: "limit",
        in: "query",
        schema: { type: "number" },
        example: 10
      }
    ],
    responses: {
      200: {
        description: "Lista de usu√°rios",
        example: [
          { id: 1, name: "John Doe" },
          { id: 2, name: "Jane Smith" }
        ]
      }
    }
  })
  async listUsers(@Req() req, @Res() res) {
    res.json([
      { id: 1, name: "John Doe" },
      { id: 2, name: "Jane Smith" }
    ]);
  }

  @Get("/:id")
  @Swagger({
    summary: "Busca usu√°rio por ID",
    tags: ["Users"],
    parameters: [
      {
        name: "id",
        in: "path",
        required: true,
        schema: { type: "string" },
        example: "123"
      }
    ],
    responses: {
      200: {
        description: "Usu√°rio encontrado",
        example: { id: "123", name: "John Doe", email: "john@example.com" }
      },
      404: {
        description: "Usu√°rio n√£o encontrado"
      }
    }
  })
  async getUser(@Req() req, @Res() res) {
    res.json({ id: req.params.id, name: "John Doe" });
  }

  @Post("/")
  @Swagger({
    summary: "Cria novo usu√°rio",
    tags: ["Users"],
    requestBody: {
      description: "Dados do usu√°rio",
      required: true,
      content: {
        "application/json": {
          schema: {
            type: "object",
            properties: {
              name: { type: "string" },
              email: { type: "string", format: "email" }
            },
            required: ["name", "email"]
          },
          example: {
            name: "Jane Doe",
            email: "jane@example.com"
          }
        }
      }
    },
    responses: {
      201: {
        description: "Usu√°rio criado",
        example: { id: 123, name: "Jane Doe", email: "jane@example.com" }
      }
    }
  })
  async createUser(@Req() req, @Res() res) {
    res.status(201).json(req.body);
  }

  @Delete("/:id")
  @Swagger({
    summary: "Deleta usu√°rio",
    tags: ["Users"],
    parameters: [
      {
        name: "id",
        in: "path",
        required: true,
        schema: { type: "string" },
        example: "123"
      }
    ],
    responses: {
      204: {
        description: "Usu√°rio deletado"
      },
      404: {
        description: "Usu√°rio n√£o encontrado"
      }
    }
  })
  async deleteUser(@Req() req, @Res() res) {
    res.status(204).send();
  }
}
```

---

## Decorators Individuais - Exemplo Completo

Se preferir usar os decorators tradicionais separadamente:

```typescript
import { 
  ApiDoc, 
  ApiResponse, 
  ApiParameter, 
  ApiBody, 
  ApiTags 
} from "azurajs/swagger";

@Controller("/users")
@ApiTags("Users")
class UserController {
  @Get("/")
  @ApiDoc({
    summary: "List all users",
    description: "Retrieve a paginated list of users"
  })
  @ApiParameter("page", "query", {
    description: "Page number",
    schema: { type: "integer", default: 1 }
  })
  @ApiParameter("limit", "query", {
    description: "Items per page",
    schema: { type: "integer", default: 10 }
  })
  @ApiResponse(200, "Success", {
    example: {
      users: [
        { id: 1, name: "John Doe" },
        { id: 2, name: "Jane Doe" }
      ],
      total: 2,
      page: 1
    }
  })
  async listUsers(@Req() req, @Res() res) {
    const page = req.query.page || 1;
    const limit = req.query.limit || 10;
    res.json({ users: [], total: 0, page });
  }

  @Get("/:id")
  @ApiDoc({
    summary: "Get user by ID",
    description: "Retrieve detailed user information"
  })
  @ApiParameter("id", "path", {
    description: "User ID",
    required: true,
    schema: { type: "integer" }
  })
  @ApiResponse(200, "User found", {
    example: { id: 1, name: "John Doe", email: "john@example.com" }
  })
  @ApiResponse(404, "User not found")
  async getUser(@Req() req, @Res() res) {
    const userId = req.params.id;
    res.json({ id: userId, name: "John Doe" });
  }

  @Post("/")
  @ApiDoc({
    summary: "Create new user",
    description: "Create a new user in the system"
  })
  @ApiBody({
    description: "User data",
    required: true,
    example: {
      name: "Jane Doe",
      email: "jane@example.com",
      age: 25
    }
  })
  @ApiResponse(201, "User created", {
    example: { id: 3, name: "Jane Doe", email: "jane@example.com" }
  })
  @ApiResponse(400, "Invalid data")
  async createUser(@Req() req, @Res() res) {
    res.status(201).json({ id: 3, ...req.body });
  }

  @Put("/:id")
  @ApiDoc({ summary: "Update user" })
  @ApiParameter("id", "path", {
    description: "User ID",
    required: true,
    schema: { type: "integer" }
  })
  @ApiBody({
    description: "Updated user data",
    example: { name: "John Updated" }
  })
  @ApiResponse(200, "User updated")
  @ApiResponse(404, "User not found")
  async updateUser(@Req() req, @Res() res) {
    res.json({ id: req.params.id, ...req.body });
  }

  @Delete("/:id")
  @ApiDoc({ summary: "Delete user" })
  @ApiParameter("id", "path", {
    description: "User ID",
    required: true
  })
  @ApiResponse(204, "User deleted")
  @ApiResponse(404, "User not found")
  async deleteUser(@Req() req, @Res() res) {
    res.status(204).send();
  }
}
```

---

## Interface Swagger UI

A interface Swagger do AzuraJS oferece:

### üé® Design Moderno
- Dark mode premium (inspirado em Stripe/Vercel)
- Sidebar com navega√ß√£o por tags
- Cards expans√≠veis para cada endpoint
- Syntax highlighting para c√≥digo

### üîç Busca em Tempo Real
- Pesquise endpoints por m√©todo ou path
- Filtragem instant√¢nea na sidebar

### üöÄ Try It Out
- Teste endpoints diretamente na UI
- Preencha par√¢metros, query strings e body
- Veja a resposta em tempo real
- Exibe tempo de resposta

### üìã Funcionalidades
- Copiar c√≥digo com um clique
- Visualiza√ß√£o de status codes
- Exemplos de request/response
- Documenta√ß√£o de tipos
- Badges para required/deprecated

## Configura√ß√£o Avan√ßada

### M√∫ltiplos Servidores

```typescript
setupSwaggerWithControllers(app, {
  title: "My API",
  version: "1.0.0",
  servers: [
    {
      url: "http://localhost:3000",
      description: "Development"
    },
    {
      url: "https://api.example.com",
      description: "Production"
    },
    {
      url: "https://staging.example.com",
      description: "Staging"
    }
  ]
}, [UserController]);
```

### Security Schemes

```typescript
setupSwaggerWithControllers(app, {
  title: "My API",
  version: "1.0.0",
  securitySchemes: {
    bearerAuth: {
      type: "http",
      scheme: "bearer",
      bearerFormat: "JWT",
      description: "JWT token from /auth/login"
    },
    apiKey: {
      type: "apiKey",
      in: "header",
      name: "X-API-Key",
      description: "API key from dashboard"
    },
    oauth2: {
      type: "oauth2",
      flows: {
        authorizationCode: {
          authorizationUrl: "https://example.com/oauth/authorize",
          tokenUrl: "https://example.com/oauth/token",
          scopes: {
            "read:users": "Read user data",
            "write:users": "Modify user data"
          }
        }
      }
    }
  }
}, [UserController]);
```

### Contact & License

```typescript
setupSwaggerWithControllers(app, {
  title: "My API",
  description: "Complete API documentation",
  version: "1.0.0",
  contact: {
    name: "API Support",
    email: "support@example.com",
    url: "https://example.com/support"
  },
  license: {
    name: "MIT",
    url: "https://opensource.org/licenses/MIT"
  }
}, [UserController]);
```

## Setup Manual (Avan√ßado)

Se voc√™ precisa de mais controle, pode configurar manualmente:

```typescript
import { AzuraClient } from "azurajs";
import { SwaggerIntegration, SwaggerGenerator } from "azurajs/swagger";
import { getControllerMetadata } from "azurajs/decorators";

const app = new AzuraClient();

// Criar gerador
const generator = new SwaggerGenerator({
  title: "My API",
  version: "1.0.0"
});

// Adicionar controllers
const metadata = getControllerMetadata(UserController);
generator.addController(metadata.prefix, metadata.routes);

// Configurar rotas Swagger
const swagger = new SwaggerIntegration(generator, {
  title: "My API",
  version: "1.0.0"
});

app.use("/docs", swagger.getUIRoute());
app.use("/api-spec.json", swagger.getSpecRoute());

// Registrar controllers normalmente
app.registerController(UserController);

app.listen();
```

## TypeScript Types

O AzuraJS fornece types completos para OpenAPI 3.0:

```typescript
import type {
  OpenAPIDocument,
  SwaggerConfig,
  ApiDocMetadata,
  ApiResponseMetadata,
  ParameterObject,
  SchemaObject
} from "azurajs/swagger";

const config: SwaggerConfig = {
  title: "My API",
  version: "1.0.0",
  servers: [{ url: "http://localhost:3000" }]
};
```

## Boas Pr√°ticas

### 1. Use @ApiTags para Organiza√ß√£o

Agrupe endpoints relacionados com tags:

```typescript
@Controller("/users")
@ApiTags("Users", "Management")
class UserController { }

@Controller("/products")
@ApiTags("Products", "E-commerce")
class ProductController { }
```

### 2. Forne√ßa Exemplos Detalhados

Exemplos ajudam desenvolvedores a entender o formato esperado:

```typescript
@ApiBody({
  description: "User registration data",
  example: {
    name: "John Doe",
    email: "john@example.com",
    password: "secure123",
    preferences: {
      newsletter: true,
      notifications: ["email", "push"]
    }
  }
})
```

### 3. Documente Todos os Status Codes

Inclua todas as respostas poss√≠veis:

```typescript
@ApiResponse(200, "Success")
@ApiResponse(400, "Bad request")
@ApiResponse(401, "Unauthorized")
@ApiResponse(403, "Forbidden")
@ApiResponse(404, "Not found")
@ApiResponse(500, "Server error")
```

### 4. Use Descriptions Claras

Seja descritivo nas summaries e descriptions:

```typescript
@ApiDoc({
  summary: "Update user profile",
  description: "Updates the authenticated user's profile information. Only provided fields will be updated. Requires valid JWT token."
})
```

### 5. Marque Endpoints Deprecados

Informe quando endpoints est√£o deprecados:

```typescript
@Get("/old-api")
@ApiDeprecated()
@ApiDoc({
  summary: "Legacy API endpoint",
  description: "‚ö†Ô∏è Deprecated: Use /api/v2/endpoint instead. This endpoint will be removed in v3.0.0"
})
```

## Troubleshooting

### Documenta√ß√£o n√£o aparece

Certifique-se de que:
1. Voc√™ importou os decorators de `azurajs/swagger`
2. Os decorators est√£o aplicados nos m√©todos
3. Os controllers foram passados para `setupSwaggerWithControllers()`

### Try It Out n√£o funciona

Verifique:
1. CORS est√° configurado corretamente
2. O servidor est√° rodando na URL esperada
3. Os par√¢metros est√£o sendo preenchidos corretamente

### Tipos TypeScript n√£o funcionam

Certifique-se de importar os types:

```typescript
import type { SwaggerConfig } from "azurajs/swagger";
```

## Pr√≥ximos Passos

- [Exemplos](/docs/examples) - Veja exemplos completos de uso
- [Decorators](/docs/decorators) - Aprenda mais sobre decorators
- [Controllers](/docs/controllers) - Entenda como controllers funcionam
