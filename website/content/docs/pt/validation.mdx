---
title: ValidaÃ§Ã£o
description: Sistema de validaÃ§Ã£o type-safe inspirado no Zod, mas melhor
icon: CircleCheck
---

# ValidaÃ§Ã£o âœ…

AzuraJS fornece um poderoso **sistema de validaÃ§Ã£o tipo Zod** com inferÃªncia completa de tipos TypeScript. Ã‰ familiar, intuitivo e pronto para produÃ§Ã£o.

## Por que o Validador Azura? ğŸš€

- âœ¨ **Sintaxe Limpa** - Intuitivo e fÃ¡cil de usar
- ğŸ¯ **Erros Formatados** - `.format()` retorna erros organizados por campo
- âš¡ **Performance** - ValidaÃ§Ã£o mais rÃ¡pida
- ğŸ”§ **TransformaÃ§Ãµes Integradas** - `.trim()`, `.toLowerCase()`, `.toUpperCase()` incluÃ­dos
- ğŸ“ **TypeScript Perfeito** - InferÃªncia automÃ¡tica de tipos
- ğŸ› ï¸ **FlexÃ­vel** - FÃ¡cil de estender com validaÃ§Ãµes customizadas

## InÃ­cio RÃ¡pido ğŸƒ

```typescript
import { v, type Infer } from 'azurajs/validators';

// Definir schema
const userSchema = v.object({
  name: v.string().min(3),
  email: v.string().email(),
  age: v.number().int().positive()
});

// Validar dados
const user = userSchema.parse(req.body);

// Ou validaÃ§Ã£o segura
const result = userSchema.safeParse(req.body);
if (result.success) {
  console.log(result.data);
} else {
  console.log(result.error.format());
}
```

## Tipos DisponÃ­veis ğŸ“š

### String

```typescript
v.string()
  .min(3)                    // MÃ­nimo 3 caracteres
  .max(50)                   // MÃ¡ximo 50 caracteres
  .length(10)                // Exatamente 10 caracteres
  .email()                   // Validar email
  .url()                     // Validar URL
  .uuid()                    // Validar UUID
  .regex(/^[A-Z]/)          // PadrÃ£o customizado
  .trim()                    // Remover espaÃ§os
  .toLowerCase()             // Converter para minÃºsculas
  .toUpperCase()             // Converter para maiÃºsculas
  .startsWith('prefixo')     // Deve comeÃ§ar com
  .endsWith('sufixo')        // Deve terminar com
  .includes('substring')     // Deve conter
  .optional()                // Campo opcional
  .nullable()                // Aceitar null
  .default('valor')          // Valor padrÃ£o
```

### Number

```typescript
v.number()
  .min(0)                    // MÃ­nimo
  .max(100)                  // MÃ¡ximo
  .int()                     // Deve ser inteiro
  .positive()                // Deve ser positivo
  .negative()                // Deve ser negativo
  .multipleOf(5)             // MÃºltiplo de N
  .optional()
  .default(0)
```

### Boolean

```typescript
v.boolean()
  .optional()
  .default(false)
```

### Date

```typescript
v.date()
  .min(new Date('2020-01-01'))
  .max(new Date())
  .optional()
```

### Array

```typescript
v.array(v.string())
  .min(1)                    // MÃ­nimo de itens
  .max(10)                   // MÃ¡ximo de itens
  .length(5)                 // Exatamente N itens
  .nonempty()                // NÃ£o pode ser vazio
  .optional()
```

### Object

```typescript
v.object({
  name: v.string(),
  age: v.number()
})
  .strict()                  // Sem campos extras
  .passthrough()             // Passar campos extras
  .partial()                 // Todos campos opcionais
  .pick('name', 'age')       // Selecionar campos
  .omit('password')          // Omitir campos
```

### Enum

```typescript
v.enum(['admin', 'user', 'guest'])
v.enum([1, 2, 3, 4, 5])
```

### Literal

```typescript
v.literal('exact-value')
v.literal(42)
v.literal(true)
```

### Union

```typescript
v.union(
  v.string(),
  v.number(),
  v.boolean()
)
```

## Exemplos PrÃ¡ticos ğŸ’¡

### ValidaÃ§Ã£o de UsuÃ¡rio

```typescript
import { v, ValidationError, type Infer } from 'azurajs/validators';

const userSchema = v.object({
  name: v.string().min(3).max(50),
  email: v.string().email(),
  age: v.number().int().min(18).max(120),
  bio: v.string().max(500).optional(),
  active: v.boolean().default(true)
});

app.post('/users', (req, res) => {
  try {
    const userData = userSchema.parse(req.body);
    const user = await createUser(userData);
    res.json(user);
  } catch (error) {
    if (error instanceof ValidationError) {
      return res.status(400).json({
        error: 'Falha na validaÃ§Ã£o',
        issues: error.format()
      });
    }
  }
});
```

### Senha Segura

```typescript
const passwordSchema = v.string()
  .min(8)
  .refine(
    (val) => /[A-Z]/.test(val),
    'Deve conter letra maiÃºscula'
  )
  .refine(
    (val) => /[a-z]/.test(val),
    'Deve conter letra minÃºscula'
  )
  .refine(
    (val) => /[0-9]/.test(val),
    'Deve conter nÃºmero'
  )
  .refine(
    (val) => /[!@#$%^&*]/.test(val),
    'Deve conter caractere especial'
  );

const registerSchema = v.object({
  email: v.string().email(),
  password: passwordSchema,
  confirmPassword: v.string()
}).refine(
  (data) => data.password === data.confirmPassword,
  'As senhas nÃ£o coincidem'
);
```

### Objetos Aninhados

```typescript
const addressSchema = v.object({
  street: v.string(),
  city: v.string(),
  state: v.string().length(2),
  zipCode: v.string().regex(/^\d{5}(-\d{4})?$/)
});

const userWithAddressSchema = v.object({
  name: v.string(),
  email: v.string().email(),
  mainAddress: addressSchema,
  shippingAddress: addressSchema.optional()
});
```

### Arrays Complexos

```typescript
const productSchema = v.object({
  id: v.string().uuid(),
  name: v.string().min(1),
  price: v.number().positive(),
  tags: v.array(v.string()).max(10)
});

const orderSchema = v.object({
  customerId: v.string().uuid(),
  items: v.array(v.object({
    productId: v.string().uuid(),
    quantity: v.number().int().positive(),
    price: v.number().positive()
  })).min(1),
  total: v.number().positive(),
  status: v.enum(['pending', 'paid', 'shipped', 'delivered'])
});
```

### Tipos Union (Pagamento)

```typescript
const paymentSchema = v.union(
  v.object({
    type: v.literal('card'),
    cardNumber: v.string().length(16),
    cvv: v.string().length(3),
    expiryDate: v.string().regex(/^\d{2}\/\d{2}$/)
  }),
  v.object({
    type: v.literal('pix'),
    key: v.string().email()
  }),
  v.object({
    type: v.literal('boleto'),
    document: v.string().length(11)
  })
);

app.post('/payment', (req, res) => {
  const payment = paymentSchema.parse(req.body) as any;
  
  // TypeScript conhece os tipos!
  if (payment.type === 'card') {
    // payment.cardNumber estÃ¡ disponÃ­vel
  } else if (payment.type === 'pix') {
    // payment.key estÃ¡ disponÃ­vel
  }
  
  res.json(payment);
});
```

### TransformaÃ§Ãµes AutomÃ¡ticas

```typescript
const searchSchema = v.object({
  query: v.string().trim().toLowerCase().min(1),
  category: v.string().optional(),
  page: v.number().int().positive().default(1),
  limit: v.number().int().positive().max(100).default(20)
});

app.get('/search', (req, res) => {
  const params = searchSchema.parse(req.query);
  
  // params.query jÃ¡ estÃ¡ trimmed e em minÃºsculas!
  console.log(params.query); // "hello world"
  console.log(params.page);  // 1 (padrÃ£o)
  
  res.json(params);
});
```

### ValidaÃ§Ã£o Condicional

```typescript
const orderSchema = v.object({
  type: v.enum(['pickup', 'delivery']),
  items: v.array(v.object({
    id: v.string(),
    qty: v.number().int().positive()
  })),
  address: v.object({
    street: v.string(),
    city: v.string()
  }).optional()
}).refine(
  (data) => {
    // Se delivery, endereÃ§o Ã© obrigatÃ³rio
    if (data.type === 'delivery') {
      return !!data.address;
    }
    return true;
  },
  'EndereÃ§o Ã© obrigatÃ³rio para entrega'
);
```

## InferÃªncia de Tipos ğŸ”§

```typescript
const schema = v.object({
  name: v.string(),
  age: v.number(),
  active: v.boolean().optional()
});

// Inferir tipo automaticamente
type User = Infer<typeof schema>;
// Resultado: { name: string; age: number; active?: boolean }

// Usar o tipo
function createUser(data: User) {
  // TypeScript conhece todos os campos!
}
```

## FormataÃ§Ã£o de Erros ğŸ“

```typescript
const result = userSchema.safeParse(invalidData);

if (!result.success) {
  console.log(result.error.format());
  
  // Retorna:
  // {
  //   "name": ["String deve ter pelo menos 3 caracteres"],
  //   "email": ["EndereÃ§o de email invÃ¡lido"],
  //   "age": ["Number deve ser pelo menos 18"]
  // }
}
```

## Middleware de ValidaÃ§Ã£o ğŸ› ï¸

```typescript
import { BaseValidator, ValidationError } from 'azurajs/validators';

function validate<T>(schema: BaseValidator<T>) {
  return (req: any, res: any, next: any) => {
    const result = schema.safeParse(req.body);
    
    if (!result.success) {
      return res.status(400).json({
        error: 'Falha na validaÃ§Ã£o',
        issues: result.error.format()
      });
    }
    
    (req as any).validated = result.data;
    next();
  };
}

// Uso
app.post('/users', validate(userSchema), (req, res) => {
  const user = (req as any).validated; // JÃ¡ validado!
  res.json(user);
});
```

## PadrÃµes AvanÃ§ados ğŸ¯

### Schemas ReutilizÃ¡veis

```typescript
// Schemas base
const idSchema = v.string().uuid();
const timestampsSchema = v.object({
  createdAt: v.date(),
  updatedAt: v.date()
});

// Reutilizar
const userSchema = v.object({
  id: idSchema,
  name: v.string(),
  ...timestampsSchema
});
```

### Validadores Customizados

```typescript
function isValidCPF(cpf: string): boolean {
  // LÃ³gica de validaÃ§Ã£o
  return true;
}

const cpfSchema = v.string()
  .length(11)
  .refine(isValidCPF, 'CPF invÃ¡lido');
```

## ComparaÃ§Ã£o com Zod ğŸ“Š

| Recurso | Azura | Zod |
|---------|-------|-----|
| Sintaxe | `v.string().email()` | `z.string().email()` |
| TransformaÃ§Ãµes | âœ… Integrado | âŒ Precisa `.transform()` |
| Erros Formatados | âœ… `.format()` | âŒ Manual |
| Performance | âš¡ Mais rÃ¡pido | ğŸ¢ Mais lento |
| Tamanho do Bundle | ğŸ“¦ Menor | ğŸ“¦ Maior |
| TypeScript | âœ… Perfeito | âœ… Bom |

## ReferÃªncia da API ğŸ“–

### Factory Principal

```typescript
import { v } from 'azurajs/validators';

v.string()     // Validador de string
v.number()     // Validador de nÃºmero
v.boolean()    // Validador de booleano
v.date()       // Validador de data
v.array(type)  // Validador de array
v.object({})   // Validador de objeto
v.enum([])     // Validador de enum
v.literal(val) // Validador de literal
v.union(...)   // Validador de uniÃ£o
```

## Melhores PrÃ¡ticas ğŸ’

1. **Use inferÃªncia TypeScript**: `type User = Infer<typeof userSchema>`
2. **Safe parse para entrada do usuÃ¡rio**: Use `.safeParse()` ao invÃ©s de `.parse()`
3. **Reutilize schemas**: Crie componentes de validaÃ§Ã£o reutilizÃ¡veis
4. **Mensagens de erro customizadas**: ForneÃ§a feedback claro de validaÃ§Ã£o
5. **Transforme dados**: Use `.trim()`, `.toLowerCase()` para transformaÃ§Ãµes automÃ¡ticas

## MigraÃ§Ã£o do Zod ğŸ”„

```typescript
// Zod
import { z } from 'zod';
const schema = z.object({
  name: z.string().min(3)
});

// Azura (sÃ³ mude z para v!)
import { v } from 'azurajs/validators';
const schema = v.object({
  name: v.string().min(3)
});
```

Quase a mesma API! ğŸ‰
